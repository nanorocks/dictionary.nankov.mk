window.onload=function(e){let countValidWord=document.getElementById('count-valid-word');let countValidWordLK=localStorage.getItem('count-valid-word');(countValidWordLK==null)?countValidWord.innerText=0:countValidWord.innerText=countValidWordLK;let apiCalls=['/api/search/','/api/search/like/'];let host=window.location.protocol+'//'+window.location.host;function autocomplete(inp,arr){var currentFocus;inp.addEventListener("input",function(e){var a,b,i,val=this.value;closeAllLists();if(!val){return!1}
    currentFocus=-1;a=document.createElement("DIV");a.setAttribute("id",this.id+"autocomplete-list");a.setAttribute("class","autocomplete-items");this.parentNode.appendChild(a);for(i=0;i<arr.length;i++){if(arr[i].substr(0,val.length).toUpperCase()==val.toUpperCase()){b=document.createElement("DIV");b.innerHTML="<strong>"+arr[i].substr(0,val.length)+"</strong>";b.innerHTML+=arr[i].substr(val.length);b.innerHTML+="<input type='hidden' value='"+arr[i]+"'>";b.addEventListener("click",function(e){inp.value=this.getElementsByTagName("input")[0].value;closeAllLists()});a.appendChild(b)}}});inp.addEventListener("keydown",function(e){var x=document.getElementById(this.id+"autocomplete-list");if(x)x=x.getElementsByTagName("div");if(e.keyCode==40){currentFocus++}else if(e.keyCode==38){currentFocus--}else if(e.keyCode==13){e.preventDefault();if(currentFocus>-1){if(x)x[currentFocus].click()}}});function closeAllLists(elmnt){var x=document.getElementsByClassName("autocomplete-items");for(var i=0;i<x.length;i++){if(elmnt!=x[i]&&elmnt!=inp){x[i].parentNode.removeChild(x[i])}}}
    document.addEventListener("click",function(e){closeAllLists(e.target)})}
    function suggestWordsOrDescription(url,wordsOrDescription,count){let dataSet='no data';ajaxRequest=new XMLHttpRequest();ajaxRequest.onreadystatechange=function(e){if(ajaxRequest.readyState===4&&ajaxRequest.status===200){dataSet=JSON.parse(ajaxRequest.responseText);if(wordsOrDescription){let wordkeys=[];dataSet.forEach(function(val){wordkeys.push(val.WORD_KEY)});autocomplete(document.getElementById("auto-complete-input"),wordkeys)}else{let showDescriptionWord=document.getElementById('show-description-word');showDescriptionWord.textContent='';let dataSetLen=(dataSet.length>0)?1:0;if(dataSetLen){let description='';dataSet.forEach(function(val){description+=val.WORD_VALUE;description+='\n\n'});countValidWord.innerText=parseInt(countValidWord.innerText)+1;localStorage.setItem('count-valid-word',countValidWord.innerText);showDescriptionWord.textContent=description;return-1}
        showDescriptionWord.textContent='No description found!!!'}}};ajaxRequest.open('GET',url);ajaxRequest.send()}
    let dataLiveInput=document.getElementById('auto-complete-input');dataLiveInput.addEventListener('keyup',function(e){let dataSearchVal=dataLiveInput.value;suggestWordsOrDescription(host+apiCalls[1]+dataSearchVal,!0,1)});let getDescriptionBtn=document.getElementById('get-description-btn');getDescriptionBtn.addEventListener('click',function(e){let getInputData=dataLiveInput.value;let showDescriptionWord=document.getElementById('show-description-word');if(getInputData.length<=0){showDescriptionWord.textContent='Please, write your word !!!';return-1}
        suggestWordsOrDescription(host+apiCalls[0]+getInputData,!1,1)})}
